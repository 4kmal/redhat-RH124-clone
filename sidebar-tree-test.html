<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Sidebar Tree Navigation Test - Red Hat Academy</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-info {
            background: #e7f3ff;
            border: 1px solid #b8daff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px;
        }
        .test-info h2 {
            color: #004085;
            margin-bottom: 16px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .feature-icon {
            color: #28a745;
            width: 20px;
        }
        .demo-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            min-width: 200px;
        }
        .demo-controls h4 {
            margin: 0 0 12px 0;
            color: #cc0000;
        }
        .demo-button {
            display: block;
            width: 100%;
            padding: 8px 12px;
            margin: 4px 0;
            background: #cc0000;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .demo-button:hover {
            background: #aa0000;
        }
        .demo-button.secondary {
            background: #6c757d;
        }
        .demo-button.secondary:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <header class="redhat-header">
        <div class="header-top">
            <div class="header-nav">
                <span>Redhat.com</span>
                <span>Support</span>
                <span>FAQ</span>
                <div class="language-selector">
                    <span>English</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <span class="user-id">test-user</span>
            </div>
        </div>
        <div class="header-main">
            <div class="header-brand">
                <div class="logo-content">
                    <img src="asset/image/logo-hat.png" alt="Red Hat" class="logo-hat">
                    <span class="brand-text">Red Hat Academy - Tree Test</span>
                </div>
                <button class="main-nav-toggle" id="mainNavToggle" aria-label="Toggle main navigation">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav class="main-nav" id="mainNav">
                <div class="main-nav-header">
                    <span class="nav-title">Main Menu</span>
                    <button class="main-nav-close" aria-label="Close navigation">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="main-nav-content">
                    <a href="#" class="main-nav-link">
                        <i class="fas fa-book"></i>
                        <span>Access Courses and Assignments</span>
                    </a>
                    <a href="#" class="main-nav-link">
                        <i class="fas fa-graduation-cap"></i>
                        <span>Access Student Resources</span>
                    </a>
                    <a href="#" class="main-nav-link">
                        <i class="fas fa-comment"></i>
                        <span>Give Feedback</span>
                    </a>
                    <a href="#" class="main-nav-link">
                        <i class="fas fa-support"></i>
                        <span>Get Support</span>
                    </a>
                    <a href="#" class="main-nav-link">
                        <i class="fas fa-network-wired"></i>
                        <span>Talent Network Portal</span>
                    </a>
                </div>
            </nav>
        </div>
        <div class="header-info">
            <div class="version-info">
                <span class="portal-logo">Red Hat Academy Portal Logo</span>
                <span class="version">Version 1.7.1</span>
            </div>
        </div>
    </header>

    <div class="container">
        <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <aside class="sidebar" id="sidebar">
            <div class="course-info" id="courseInfo">
                <!-- Dynamic course info will be loaded here -->
            </div>

            <nav class="sidebar-nav" id="sidebarNav">
                <!-- Dynamic navigation tree will be loaded here -->
            </nav>
        </aside>

        <main class="main-content">
            <div class="course-container">
                <div class="course-header">
                    <h1>Dynamic Sidebar Tree Navigation Test</h1>
                    <div class="course-actions">
                        <button class="download-badge">
                            <i class="fas fa-tree"></i> Tree Test
                        </button>
                        <button class="translations">
                            <i class="fas fa-sitemap"></i> Navigation
                        </button>
                    </div>
                </div>
                
                <div class="course-layout">
                    <div class="course-nav-tabs">
                        <button class="tab-btn active" data-tab="tree-overview">Tree Overview</button>
                        <button class="tab-btn" data-tab="course">Course Content</button>
                        <button class="tab-btn" data-tab="features">Features</button>
                    </div>
                    
                    <div class="content-wrapper">
                        <div id="tree-overview" class="tab-content active">
                            <div class="test-info">
                                <h2>ðŸŒ³ Dynamic Sidebar Tree Navigation</h2>
                                <p><strong>NEW FEATURES:</strong> The sidebar now displays a collapsible tree structure showing the current chapter and all its sections.</p>
                                
                                <h3>Key Features:</h3>
                                <ul class="feature-list">
                                    <li>
                                        <i class="fas fa-map-marker-alt feature-icon"></i>
                                        <span><strong>Context Awareness:</strong> Shows current chapter and section at the top</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-tree feature-icon"></i>
                                        <span><strong>Collapsible Tree:</strong> Expand/collapse chapters to see their sections</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-chart-line feature-icon"></i>
                                        <span><strong>Progress Tracking:</strong> Visual indicators for completed, current, and pending sections</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-mobile-alt feature-icon"></i>
                                        <span><strong>Mobile Optimized:</strong> Touch-friendly targets and responsive design</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-video feature-icon"></i>
                                        <span><strong>Content Indicators:</strong> Shows which sections have video, content, or are coming soon</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-clock feature-icon"></i>
                                        <span><strong>Duration Display:</strong> Shows estimated time for each section</span>
                                    </li>
                                </ul>

                                <h3>How to Test:</h3>
                                <ol>
                                    <li><strong>Open Sidebar:</strong> Click the hamburger menu (â˜°) to open the course sidebar</li>
                                    <li><strong>Expand Chapters:</strong> Click on chapter headers to expand/collapse sections</li>
                                    <li><strong>Navigate Sections:</strong> Click on any section with content to navigate</li>
                                    <li><strong>Check Progress:</strong> Notice the visual progress indicators and current location display</li>
                                    <li><strong>Test Mobile:</strong> Resize browser or use mobile view to test touch interactions</li>
                                </ol>
                            </div>
                        </div>

                        <div id="course" class="tab-content">
                            <div class="content-area">
                                <div class="breadcrumb">
                                    <span>RH124</span> > 
                                    <span>Dynamic Navigation</span> > 
                                    <span class="current">Tree Structure Test</span>
                                </div>
                                
                                <header class="content-header">
                                    <h1>Course Content with Tree Navigation</h1>
                                    <div class="chapter-info">
                                        <span class="chapter-number">Test Section</span>
                                        <span class="estimated-time"><i class="fas fa-clock"></i> Interactive Demo</span>
                                    </div>
                                </header>
                                
                                <section class="content-body">
                                    <div class="learning-objectives">
                                        <h3>Tree Navigation Benefits</h3>
                                        <ul>
                                            <li>Quick overview of entire course structure</li>
                                            <li>Easy navigation between chapters and sections</li>
                                            <li>Clear progress visualization</li>
                                            <li>Context-aware current location display</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="content-section">
                                        <h2>Before vs After</h2>
                                        <p><strong>BEFORE:</strong> Static list of all course modules with no hierarchy or context</p>
                                        <p><strong>AFTER:</strong> Dynamic tree showing current chapter context with collapsible sections</p>
                                        
                                        <div class="info-box">
                                            <i class="fas fa-info-circle"></i>
                                            <div class="info-content">
                                                <strong>Navigation Tip:</strong> The sidebar automatically expands the chapter containing your current section and highlights your progress through the course.
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>

                        <div id="features" class="tab-content">
                            <div class="test-info">
                                <h2>ðŸš€ Technical Implementation</h2>
                                
                                <h3>Dynamic Tree Renderer</h3>
                                <ul class="feature-list">
                                    <li>
                                        <i class="fas fa-code feature-icon"></i>
                                        <span>Built with modern JavaScript ES6+ classes</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-database feature-icon"></i>
                                        <span>Integrates with existing TOC data structure</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-sync feature-icon"></i>
                                        <span>Real-time updates when navigation changes</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-paint-brush feature-icon"></i>
                                        <span>CSS animations for smooth expand/collapse</span>
                                    </li>
                                </ul>

                                <h3>Progress Tracking</h3>
                                <ul class="feature-list">
                                    <li>
                                        <i class="fas fa-check-circle feature-icon"></i>
                                        <span>Automatic progress calculation based on current position</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-chart-pie feature-icon"></i>
                                        <span>Visual progress map with chapter indicators</span>
                                    </li>
                                    <li>
                                        <i class="fas fa-bookmark feature-icon"></i>
                                        <span>Persistent state management for expanded chapters</span>
                                    </li>
                                </ul>

                                <div class="content-navigation">
                                    <button class="nav-btn prev">
                                        <i class="fas fa-chevron-left"></i> Previous Feature
                                    </button>
                                    <button class="nav-btn next">
                                        Next Feature <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <div class="demo-controls">
        <h4>Demo Controls</h4>
        <button class="demo-button" onclick="testNavigation('section-a-1')">Go to Section A.1</button>
        <button class="demo-button" onclick="testNavigation('section-a-2')">Go to Section A.2</button>
        <button class="demo-button" onclick="testNavigation('section-a-3')">Go to Section A.3</button>
        <button class="demo-button secondary" onclick="toggleAllChapters()">Toggle All Chapters</button>
        <button class="demo-button secondary" onclick="showStats()">Show Tree Stats</button>
    </div>
    
    <footer class="redhat-footer">
        <div class="footer-content">
            <img src="asset/image/logo-hat.png" alt="Red Hat logo" class="footer-logo">
            <div class="footer-links">
                <span>Â© 2025 Red Hat, Inc.</span>
                <a href="#">Tree Navigation</a>
                <a href="#">Dynamic Sidebar</a>
                <a href="#">Course Structure</a>
            </div>
        </div>
    </footer>

    <!-- Table of Contents Modules -->
    <script src="table-of-content/toc-data.js"></script>
    <script src="table-of-content/toc-renderer.js"></script>
    
    <!-- Sidebar Tree Navigation -->
    <script src="sidebar/sidebar-tree-renderer.js"></script>
    
    <!-- Chapter Content Files -->
    <script src="chapter/intro/section-a-1.js"></script>
    <script src="chapter/intro/section-a-2.js"></script>
    <script src="chapter/intro/section-a-3.js"></script>
    
    <!-- Chapter Content System -->
    <script src="chapter/chapter-loader-simple.js"></script>
    
    <!-- Main Application Scripts -->
    <script src="script.js"></script>
    
    <script>
        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');
                
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
            });
        });

        // Demo functions
        function testNavigation(sectionId) {
            if (typeof window.updateSidebarCurrentSection === 'function') {
                window.updateSidebarCurrentSection(sectionId);
                if (typeof window.showToast === 'function') {
                    window.showToast(`Navigated to ${sectionId}`);
                }
            }
        }

        function toggleAllChapters() {
            if (window.sidebarTreeRenderer) {
                const stats = window.sidebarTreeRenderer.getStats();
                console.log('Current tree state:', stats);
                
                // Toggle each chapter
                if (window.TOC_DATA) {
                    window.TOC_DATA.chapters.forEach(chapter => {
                        window.sidebarTreeRenderer.toggleChapter(chapter.id);
                    });
                }
            }
        }

        function showStats() {
            if (window.sidebarTreeRenderer) {
                const stats = window.sidebarTreeRenderer.getStats();
                alert(`Tree Stats:
Total Chapters: ${stats.totalChapters}
Total Sections: ${stats.totalSections}
Current Section: ${stats.currentSection}
Completed Sections: ${stats.completedSections}
Expanded Chapters: ${stats.expandedChapters.join(', ')}`);
            }
        }

        // Test button interactions
        document.querySelectorAll('.download-badge, .translations').forEach(btn => {
            btn.addEventListener('click', function() {
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i> Tree Working!';
                this.style.background = '#28a745';
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.style.background = '';
                }, 1500);
            });
        });

        console.log('Sidebar Tree Test Page Loaded');
    </script>
</body>
</html>